---
# Expose Spark UI for Charts App
# Access at: http://localhost:30041
apiVersion: v1
kind: Service
metadata:
  name: spark-ui-charts
  labels:
    app: spark-ui-charts
spec:
  type: NodePort
  selector:
    sparkapplication: steam-charts-app
    spark-role: driver
  ports:
    - name: spark-ui
      port: 4040
      targetPort: 4040
      nodePort: 30041
      protocol: TCP

---
# Expose Spark UI for Reviews App
# Access at: http://localhost:30042
apiVersion: v1
kind: Service
metadata:
  name: spark-ui-reviews
  labels:
    app: spark-ui-reviews
spec:
  type: NodePort
  selector:
    sparkapplication: steam-reviews-app
    spark-role: driver
  ports:
    - name: spark-ui
      port: 4040
      targetPort: 4040
      nodePort: 30042
      protocol: TCP

---
# Expose Spark UI for Players App
# Access at: http://localhost:30043
apiVersion: v1
kind: Service
metadata:
  name: spark-ui-players
  labels:
    app: spark-ui-players
spec:
  type: NodePort
  selector:
    sparkapplication: steam-players-app
    spark-role: driver
  ports:
    - name: spark-ui
      port: 4040
      targetPort: 4040
      nodePort: 30043
      protocol: TCP

---
# Expose Grafana via NodePort
# Access at: http://localhost:30300
# Default login: admin/admin
apiVersion: v1
kind: Service
metadata:
  name: grafana-nodeport
  labels:
    app: grafana
spec:
  type: NodePort
  selector:
    app: grafana
  ports:
    - name: http
      port: 3000
      targetPort: 3000
      nodePort: 30300
      protocol: TCP

---
# Expose Prometheus via NodePort
# Access at: http://localhost:30090
apiVersion: v1
kind: Service
metadata:
  name: prometheus-nodeport
  labels:
    app: prometheus
spec:
  type: NodePort
  selector:
    app: prometheus
  ports:
    - name: http
      port: 9090
      targetPort: 9090
      nodePort: 30090
      protocol: TCP

---
# Expose Mongo Express via NodePort
# Access at: http://localhost:30081
# MongoDB Web UI for browsing collections and data
apiVersion: v1
kind: Service
metadata:
  name: mongo-express-nodeport
  labels:
    app: mongo-express
spec:
  type: NodePort
  selector:
    app: mongo-express
  ports:
    - name: http
      port: 8081
      targetPort: 8081
      nodePort: 30081
      protocol: TCP
